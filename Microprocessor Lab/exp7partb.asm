CODE SEGMENT
ASSUME CS:CODE
ORG 1000H

START:

MOV DX, 0FF2BH
MOV AL, 80H
OUT DX, AL

;ROW
MOV DX, 0FF2AH
MOV AL, 0FFH
OUT DX, AL

LL:

MOV DX, 0FF29H
MOV AL, 0FFH
OUT DX, AL

MOV AL, 0FEH
MOV CX, 8

COL:
MOV DX, 0FF28H
OUT DX, AL
SAL AL, 1
INC AL
PUSH CX
CALL COUNT
POP CX
LOOP COL

MOV DX, 0FF28H
MOV AL, 0FFH
OUT DX, AL

MOV AL, 0FEH
MOV CX, 8

COL2:

MOV DX, 0FF29H
OUT DX, AL
SAL AL, 1
INC AL
PUSH CX
CALL COUNT
POP CX
LOOP COL2
JMP LL

COUNT PROC NEAR
      MOV CX, 10000
      L1:
      NOP
      LOOP L1
      RET
COUNT ENDP

END START
CODE ENDS